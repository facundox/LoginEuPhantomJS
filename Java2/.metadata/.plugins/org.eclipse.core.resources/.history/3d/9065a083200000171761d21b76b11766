package Automation.PhantomJS;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.TimeUnit;

import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.phantomjs.PhantomJSDriver;
import org.openqa.selenium.phantomjs.PhantomJSDriverService;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.support.ui.Sleeper;

import cucumber.api.java.Before;

public class Phantom {

	WebDriver driver = null;

	public void Headless() throws Exception {
		DesiredCapabilities caps = new DesiredCapabilities();
		caps.setJavascriptEnabled(true);
		caps.setCapability(PhantomJSDriverService.PHANTOMJS_EXECUTABLE_PATH_PROPERTY,
				"C:/Users/fbonifac/Documents/phantomjs-2.1.1-windows/bin/phantomjs.exe");
		try {
			driver = new PhantomJSDriver();
		} catch (Exception e) {
			System.out.println("Fallo");
		}
	}

	@Test
	public void IngresoCas() throws Exception {
		this.Headless();
		driver.get("https://cas.nac.everis.int/acceso/login/");
		Thread.sleep(3000);
		List<WebElement> lista = new ArrayList<WebElement>();
		lista = driver.findElements(By.xpath("//input[contains(@class, 'form-control z-textbox')]"));
		WebElement user = lista.get(0);
		user.sendKeys("fbonifac");
		WebElement pass = lista.get(1);
		pass.sendKeys("Boni1245");
		WebElement btnacceso = driver.findElement(By.xpath("//button[contains(., 'Acceder')]"));
		btnacceso.click();
		System.out.println("Paso");
	}

}
